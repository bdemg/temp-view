{% extends "common/index.html" %}

{% block title %}Reporte de Temperaturas{% endblock %}

{% block body %}
<div class="row" ng-app="TempView" ng-controller="GeneralReportsController">
  <div class="columns large-22"><h2>Reportes</h2></div>
  <div class="columns large-22" layout="row" layout-align="space-around start">
    <div flex="30">
      <label for="id_sensor">Sensor:</label>
      <select name="sensor" id="id_sensor" ng-model="sensor">
        <option value selected>-------</option>
        {% for sensor in sensors %}
        <option value="{{sensor.MAC_address}}">Edificio:{{sensor.building.name}} - Salón:{{sensor.room.name}}</option>
        {% endfor %}
      </select>
    </div>
    <div flex="30">
      <label for="id_range" >Rango de tiempo:</label>
      <select class="" ng-model="range" name="range" id="id_range">
        <option value selected>-------</option>
        <option value="day">Dia</option>
        <option value="week">Semana</option>
        <option value="month">Mes</option>
        <option value="year">Año</option>
      </select>
    </div>
    <div flex="30">
      <label for="id_start_date" >Fecha de inicio:</label>
      <input type="date" name="start_date" id="id_start_date" ng-model="startDate">
    </div>
    <div flex="9">
      <input ng-click="getTemperatureReadouts()" type="button" name="button" class="button success" style="margin-top:1.4rem" value="Aceptar">
    </div>
  </div>
  <!--Div that will hold the pie chart-->
    <div class="columns large-22" id="chart_div"></div>


</div>
{% endblock %}

{% block extra_scripts %}
<!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart'], 'language': 'es'});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(hideChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function hideChart() {

        $('#chart_div').hide();
      }
    </script>
{% endblock %}
